
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SysCpuHandlingItf &mdash; RuntimeSystemOnlineHelp V3.5.10.0</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="RuntimeSystemOnlineHelp V3.5.10.0" href="../index.html" />
    <link rel="up" title="Reference" href="index.html" />
    <link rel="next" title="SysCpuMultiCoreItf" href="group___sys_cpu_multi_core_itf.html" />
    <link rel="prev" title="SysComItf" href="group___sys_com_itf.html" /> 
  </head>
  <body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="group___sys_cpu_multi_core_itf.html" title="SysCpuMultiCoreItf"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="group___sys_com_itf.html" title="SysComItf"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">RuntimeSystemOnlineHelp V3.5.10.0</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SysCpuHandlingItf</a><ul>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#data-structures">Data Structures</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
<li><a class="reference internal" href="#typedefs">Typedefs</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed Description</a></li>
<li><a class="reference internal" href="#macro-definition-documentation">Macro Definition Documentation</a><ul>
<li><a class="reference internal" href="#define-itf-syscpuhandling">#define ITF_SysCpuHandling</a></li>
<li><a class="reference internal" href="#define-extitf-syscpuhandling">#define EXTITF_SysCpuHandling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#typedef-documentation">Typedef Documentation</a><ul>
<li><a class="reference internal" href="#typedef-struct-tagsyscpuatomicadd-struct-syscpuatomicadd-struct">typedef struct tagsyscpuatomicadd_struct  syscpuatomicadd_struct</a></li>
<li><a class="reference internal" href="#typedef-struct-tagsyscpucalliecfuncwithparams-struct-syscpucalliecfuncwithparams-struct">typedef struct tagsyscpucalliecfuncwithparams_struct  syscpucalliecfuncwithparams_struct</a></li>
<li><a class="reference internal" href="#typedef-struct-tagsyscputestandreset-struct-syscputestandreset-struct">typedef struct tagsyscputestandreset_struct  syscputestandreset_struct</a></li>
<li><a class="reference internal" href="#typedef-struct-tagsyscputestandset-struct-syscputestandset-struct">typedef struct tagsyscputestandset_struct  syscputestandset_struct</a></li>
<li><a class="reference internal" href="#typedef-struct-tagsyscputestandsetbit-struct-syscputestandsetbit-struct">typedef struct tagsyscputestandsetbit_struct  syscputestandsetbit_struct</a></li>
<li><a class="reference internal" href="#typedef-isyscpuhandling-c-isyscpuhandling">typedef ISysCpuHandling_C ISysCpuHandling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#function-documentation">Function Documentation</a><ul>
<li><a class="reference internal" href="#void-syscpuatomicadd-syscpuatomicadd-struct-p">void syscpuatomicadd (syscpuatomicadd_struct *p)</a></li>
<li><a class="reference internal" href="#void-syscpucalliecfuncwithparams-syscpucalliecfuncwithparams-struct-p">void syscpucalliecfuncwithparams (syscpucalliecfuncwithparams_struct *p)</a></li>
<li><a class="reference internal" href="#void-syscputestandreset-syscputestandreset-struct-p">void syscputestandreset (syscputestandreset_struct *p)</a></li>
<li><a class="reference internal" href="#void-syscputestandset-syscputestandset-struct-p">void syscputestandset (syscputestandset_struct *p)</a></li>
<li><a class="reference internal" href="#void-syscputestandsetbit-syscputestandsetbit-struct-p">void syscputestandsetbit (syscputestandsetbit_struct *p)</a></li>
<li><a class="reference internal" href="#rts-result-syscpuhandlingosinit-init-struct-pinit">RTS_RESULT SysCpuHandlingOSInit (INIT_STRUCT *pInit)</a></li>
<li><a class="reference internal" href="#rts-result-syscpuhandlingoshookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2">RTS_RESULT SysCpuHandlingOSHookFunction (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)</a></li>
<li><a class="reference internal" href="#int-syscpuflushinstructioncache-void-pbaseaddress-unsigned-long-ulsize">int SysCpuFlushInstructionCache (void *pBaseAddress, unsigned long ulSize)</a></li>
<li><a class="reference internal" href="#rts-result-syscpucalliecfuncwithparams-rts-void-fctptr-pfiecfunc-void-pparam-int-isize">RTS_RESULT SysCpuCallIecFuncWithParams (RTS_VOID_FCTPTR pfIECFunc, void *pParam, int iSize)</a></li>
<li><a class="reference internal" href="#void-syscpudebughandler-void">void syscpudebughandler (void)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetbreakpointcode-unsigned-char-pbyareastart-unsigned-char-pbybpaddress-unsigned-char-pbyopcode-int-piopcodesize">RTS_RESULT SysCpuGetBreakpointCode (unsigned char *pbyAreaStart, unsigned char *pbyBPAddress, unsigned char *pbyOpCode, int *piOpcodeSize)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetcallstackentry-rts-uintptr-pbp-void-ppaddress">RTS_RESULT SysCpuGetCallstackEntry (RTS_UINTPTR *pBP, void **ppAddress)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetcallstackentry2-rts-i32-bieccode-rts-uintptr-pbp-void-ppaddress">RTS_RESULT SysCpuGetCallstackEntry2 (RTS_I32 bIecCode, RTS_UINTPTR *pBP, void **ppAddress)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetcallstackentry3-rts-i32-bieccode-regcontext-pcontext-void-ppaddress">RTS_RESULT SysCpuGetCallstackEntry3 (RTS_I32 bIecCode, RegContext *pContext, void **ppAddress)</a></li>
<li><a class="reference internal" href="#rts-uintptr-syscpusearchonstack-rts-uintptr-psp-rts-uintptr-pattern-rts-result-presult">RTS_UINTPTR* SysCpuSearchOnStack_ (RTS_UINTPTR *pSP, RTS_UINTPTR pattern, RTS_RESULT *pResult)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetinstancepointer-rts-uintptr-pbp-void-ppinstancepointer">RTS_RESULT SysCpuGetInstancePointer (RTS_UINTPTR *pBP, void **ppInstancePointer)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetmonitoringbase-rts-uintptr-pbp">RTS_RESULT SysCpuGetMonitoringBase (RTS_UINTPTR *pBP)</a></li>
<li><a class="reference internal" href="#rts-result-syscputestandset-rts-ui32-pul-int-ibit">RTS_RESULT SysCpuTestAndSet (RTS_UI32 *pul, int iBit)</a></li>
<li><a class="reference internal" href="#rts-result-syscputestandreset-rts-ui32-pul-int-ibit">RTS_RESULT SysCpuTestAndReset (RTS_UI32 *pul, int iBit)</a></li>
<li><a class="reference internal" href="#rts-result-syscputestandsetbit-void-paddress-int-nlen-int-ibit-int-bset">RTS_RESULT SysCpuTestAndSetBit (void *pAddress, int nLen, int iBit, int bSet)</a></li>
<li><a class="reference internal" href="#rts-result-syscpugetcontext-regcontext-pcontext">RTS_RESULT SysCpuGetContext (RegContext *pContext)</a></li>
<li><a class="reference internal" href="#rts-i32-syscpuatomicadd-rts-i32-pivalue-rts-i32-nsum-rts-result-presult">RTS_I32 SysCpuAtomicAdd (RTS_I32 *piValue, RTS_I32 nSum, RTS_RESULT *pResult)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="group___sys_com_itf.html"
                        title="previous chapter">SysComItf</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="group___sys_cpu_multi_core_itf.html"
                        title="next chapter">SysCpuMultiCoreItf</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/Reference/group___sys_cpu_handling_itf.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="syscpuhandlingitf">
<span id="group-sys-cpu-handling-itf"></span><h1>SysCpuHandlingItf<a class="headerlink" href="#syscpuhandlingitf" title="Permalink to this headline">¶</a></h1>
<p>Interface of SysCpuHandling. <a class="reference internal" href="#group-sys-cpu-handling-itf-details"><em>More...</em></a></p>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><em class="xref std std-ref">       Platform defines - IEC codegenerator specific! &lt;group___sys_cpu_handling_itf___platformdefines-_i_e_ccodegeneratorspecific&gt;</em></li>
<li><a class="reference internal" href="group___sys_cpu_handling_itf___platformdefines.html#group-sys-cpu-handling-itf-platformdefines"><em>Platform defines</em></a></li>
<li><a class="reference internal" href="group___sys_cpu_handling_itf___settings.html#group-sys-cpu-handling-itf-settings"><em>Settings</em></a></li>
<li><a class="reference internal" href="group___sys_cpu_handling_itf___staticdefines.html#group-sys-cpu-handling-itf-staticdefines"><em>Static defines</em></a></li>
</ul>
</div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>struct <a class="reference internal" href="structtagsyscpuatomicadd__struct.html#structtagsyscpuatomicadd-struct"><em>tagsyscpuatomicadd_struct</em></a></li>
<li>struct <a class="reference internal" href="structtagsyscpucalliecfuncwithparams__struct.html#structtagsyscpucalliecfuncwithparams-struct"><em>tagsyscpucalliecfuncwithparams_struct</em></a></li>
<li>struct <a class="reference internal" href="structtagsyscputestandreset__struct.html#structtagsyscputestandreset-struct"><em>tagsyscputestandreset_struct</em></a></li>
<li>struct <a class="reference internal" href="structtagsyscputestandset__struct.html#structtagsyscputestandset-struct"><em>tagsyscputestandset_struct</em></a></li>
<li>struct <a class="reference internal" href="structtagsyscputestandsetbit__struct.html#structtagsyscputestandsetbit-struct"><em>tagsyscputestandsetbit_struct</em></a></li>
<li>struct <a class="reference internal" href="struct_i_sys_cpu_handling___c.html#struct-i-sys-cpu-handling-c"><em>ISysCpuHandling_C</em></a></li>
</ul>
</div>
<div class="section" id="macros">
<h2>Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>#define <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga7714b75559c7f21bb5d6dd01bf3bcee5"><em>ITF_SysCpuHandling</em></a></li>
<li>#define <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga5624e438e0e63b44d0defa028bf4d467"><em>EXTITF_SysCpuHandling</em></a></li>
</ul>
</div>
<div class="section" id="typedefs">
<h2>Typedefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>typedef struct <a class="reference internal" href="structtagsyscpuatomicadd__struct.html#structtagsyscpuatomicadd-struct"><em>tagsyscpuatomicadd_struct</em></a> <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga50aabc20d5e6ebeb33501c4c2a08176a"><em>syscpuatomicadd_struct</em></a></li>
<li>typedef struct <a class="reference internal" href="structtagsyscpucalliecfuncwithparams__struct.html#structtagsyscpucalliecfuncwithparams-struct"><em>tagsyscpucalliecfuncwithparams_struct</em></a> <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga9ad4c2d68fbe821e17fc3e1ddddc92d7"><em>syscpucalliecfuncwithparams_struct</em></a></li>
<li>typedef struct <a class="reference internal" href="structtagsyscputestandreset__struct.html#structtagsyscputestandreset-struct"><em>tagsyscputestandreset_struct</em></a> <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga4ce7f1fe46dbd728cef005e0d1ea2e07"><em>syscputestandreset_struct</em></a></li>
<li>typedef struct <a class="reference internal" href="structtagsyscputestandset__struct.html#structtagsyscputestandset-struct"><em>tagsyscputestandset_struct</em></a> <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga9ce286678bdba5814a3661e511732d2b"><em>syscputestandset_struct</em></a></li>
<li>typedef struct <a class="reference internal" href="structtagsyscputestandsetbit__struct.html#structtagsyscputestandsetbit-struct"><em>tagsyscputestandsetbit_struct</em></a> <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga3d7349a82fde096015e748c153642176"><em>syscputestandsetbit_struct</em></a></li>
<li>typedef <a class="reference internal" href="struct_i_sys_cpu_handling___c.html#struct-i-sys-cpu-handling-c"><em>ISysCpuHandling_C</em></a> <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga117e46ae162923b95d2a653634b0a217"><em>ISysCpuHandling</em></a></li>
</ul>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>void <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga8c261020d58afb5468eb75cd51370829"><em>syscpuatomicadd</em></a> (<a class="reference internal" href="#group-sys-cpu-handling-itf-1ga50aabc20d5e6ebeb33501c4c2a08176a"><em>syscpuatomicadd_struct</em></a> * p)</li>
<li>void <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga342ad004d7518950bad3f3b11a7b9bc0"><em>syscpucalliecfuncwithparams</em></a> (<a class="reference internal" href="#group-sys-cpu-handling-itf-1ga9ad4c2d68fbe821e17fc3e1ddddc92d7"><em>syscpucalliecfuncwithparams_struct</em></a> * p)</li>
<li>void <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga9e0dc508a43652ec1d666a63d4e0e92d"><em>syscputestandreset</em></a> (<a class="reference internal" href="#group-sys-cpu-handling-itf-1ga4ce7f1fe46dbd728cef005e0d1ea2e07"><em>syscputestandreset_struct</em></a> * p)</li>
<li>void <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga6e1edd6a282e2dc1bbd01b01de3750cf"><em>syscputestandset</em></a> (<a class="reference internal" href="#group-sys-cpu-handling-itf-1ga9ce286678bdba5814a3661e511732d2b"><em>syscputestandset_struct</em></a> * p)</li>
<li>void <a class="reference internal" href="#group-sys-cpu-handling-itf-1gac254a4ee5e08aae17ac9e1ac68b1b22c"><em>syscputestandsetbit</em></a> (<a class="reference internal" href="#group-sys-cpu-handling-itf-1ga3d7349a82fde096015e748c153642176"><em>syscputestandsetbit_struct</em></a> * p)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1gadce9940c690ed21f47d007f9878c5519"><em>SysCpuHandlingOSInit</em></a> (INIT_STRUCT * pInit)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga215b7f5823e79aee802deef8bcfd39ca"><em>SysCpuHandlingOSHookFunction</em></a> (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)</li>
<li>int <a class="reference internal" href="#group-sys-cpu-handling-itf-1gad9c708fa59e4da7c362a2bd305dee8bc"><em>SysCpuFlushInstructionCache</em></a> (void * pBaseAddress, unsigned long ulSize)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga008f25292ebc98e6882d51ebd6303c14"><em>SysCpuCallIecFuncWithParams</em></a> (RTS_VOID_FCTPTR pfIECFunc, void * pParam, int iSize)</li>
<li>void <a class="reference internal" href="#group-sys-cpu-handling-itf-1gaf578b1b3a5575decb892beb9ce698a90"><em>syscpudebughandler</em></a> (void)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1gaebc0723f197000901171b7967ee8969e"><em>SysCpuGetBreakpointCode</em></a> (unsigned char * pbyAreaStart, unsigned char * pbyBPAddress, unsigned char * pbyOpCode, int * piOpcodeSize)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1gacd19edb2dbc783f7deb654d33d60102a"><em>SysCpuGetCallstackEntry</em></a> (RTS_UINTPTR * pBP, void ** ppAddress)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga81a59c15038759a6a8b84f8fc1a776bf"><em>SysCpuGetCallstackEntry2</em></a> (RTS_I32 bIecCode, RTS_UINTPTR * pBP, void ** ppAddress)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1gad47b07d01ccaab9a433ea87080d89ab1"><em>SysCpuGetCallstackEntry3</em></a> (RTS_I32 bIecCode, <a class="reference internal" href="group___sys_except_itf___exceptioncontext.html#group-sys-except-itf-exceptioncontext-1gab00884ef66266dc256618d479aade118"><em>RegContext</em></a> * pContext, void ** ppAddress)</li>
<li>RTS_UINTPTR * <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga29efadcd4e9cb59135d39c400a764105"><em>SysCpuSearchOnStack_</em></a> (RTS_UINTPTR * pSP, RTS_UINTPTR pattern, RTS_RESULT * pResult)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga2722c29654c8d24b447b45026f539318"><em>SysCpuGetInstancePointer</em></a> (RTS_UINTPTR * pBP, void ** ppInstancePointer)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga404cef3173477767d7ca48ae0f1cd21b"><em>SysCpuGetMonitoringBase</em></a> (RTS_UINTPTR * pBP)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1gaad809fbddfc71b5cd8948e0df09dfc16"><em>SysCpuTestAndSet</em></a> (RTS_UI32 * pul, int iBit)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga5aa3e6598c2ed1d99444811172505991"><em>SysCpuTestAndReset</em></a> (RTS_UI32 * pul, int iBit)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga6f2a3920d62c0af0c60ba69fec79fff4"><em>SysCpuTestAndSetBit</em></a> (void * pAddress, int nLen, int iBit, int bSet)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-cpu-handling-itf-1ga84f32e87a6568e4aab2cb573aebbf0be"><em>SysCpuGetContext</em></a> (<a class="reference internal" href="group___sys_except_itf___exceptioncontext.html#group-sys-except-itf-exceptioncontext-1gab00884ef66266dc256618d479aade118"><em>RegContext</em></a> * pContext)</li>
<li>RTS_I32 <a class="reference internal" href="#group-sys-cpu-handling-itf-1gaa546c6642b797434c619a165d0cd3714"><em>SysCpuAtomicAdd</em></a> (RTS_I32 * piValue, RTS_I32 nSum, RTS_RESULT * pResult)</li>
</ul>
</div>
<div class="section" id="detailed-description">
<span id="group-sys-cpu-handling-itf-details"></span><h2>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>Interface of SysCpuHandling.</p>
<p>The SysCpuHandling interface contains all cpu specific routines.</p>
<p>To detect, for which platform the component is compiled, there are special defines that must be set in sysdefines.h dependant of the compiler specific options (see category &#8220;Processor ID&#8221; in <em class="xref std std-ref">SysTargetItf.h</em> )</p>
<p><strong>Copyright:</strong></p>
<p>(c) 2003-2016 3S-Smart Software Solutions</p>
</div>
<div class="section" id="macro-definition-documentation">
<h2>Macro Definition Documentation<a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="define-itf-syscpuhandling">
<span id="group-sys-cpu-handling-itf-1ga7714b75559c7f21bb5d6dd01bf3bcee5"></span><h3>#define ITF_SysCpuHandling<a class="headerlink" href="#define-itf-syscpuhandling" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="define-extitf-syscpuhandling">
<span id="group-sys-cpu-handling-itf-1ga5624e438e0e63b44d0defa028bf4d467"></span><h3>#define EXTITF_SysCpuHandling<a class="headerlink" href="#define-extitf-syscpuhandling" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="typedef-documentation">
<h2>Typedef Documentation<a class="headerlink" href="#typedef-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="typedef-struct-tagsyscpuatomicadd-struct-syscpuatomicadd-struct">
<span id="group-sys-cpu-handling-itf-1ga50aabc20d5e6ebeb33501c4c2a08176a"></span><h3>typedef struct tagsyscpuatomicadd_struct  syscpuatomicadd_struct<a class="headerlink" href="#typedef-struct-tagsyscpuatomicadd-struct-syscpuatomicadd-struct" title="Permalink to this headline">¶</a></h3>
<p>EXTERN LIB SECTION BEGIN &lt;SIL2&gt;</p>
<p>Function to increment the content of the given pointer by 1 in one atomic operation (task safe). IMPLEMENTATION NOTE:</p>
<ul class="simple">
<li>Add/Sub the value to the content of the pointer</li>
<li>Return the value after the Add/Sub operation Both things must be done atomic!</li>
</ul>
<p><strong>Returns:</strong></p>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>RESULT: Returns the value after the increment operation in an atomic way!</p>
</div>
<div class="section" id="typedef-struct-tagsyscpucalliecfuncwithparams-struct-syscpucalliecfuncwithparams-struct">
<span id="group-sys-cpu-handling-itf-1ga9ad4c2d68fbe821e17fc3e1ddddc92d7"></span><h3>typedef struct tagsyscpucalliecfuncwithparams_struct  syscpucalliecfuncwithparams_struct<a class="headerlink" href="#typedef-struct-tagsyscpucalliecfuncwithparams-struct-syscpucalliecfuncwithparams-struct" title="Permalink to this headline">¶</a></h3>
<p>&lt;SIL2&gt;</p>
<p>Call an IEC function from plain C code. Since different CPU&#8217;s/systems use different calling conventions, this function should be used as a wrapper. IEC functions or methods of function block use all the same calling convention: They have no return value and exactly one parameter, which is a pointer to a struct that contains all required IN and OUT parameters. RETURN: Returns the runtime system error code (see CmpErrors.library)</p>
</div>
<div class="section" id="typedef-struct-tagsyscputestandreset-struct-syscputestandreset-struct">
<span id="group-sys-cpu-handling-itf-1ga4ce7f1fe46dbd728cef005e0d1ea2e07"></span><h3>typedef struct tagsyscputestandreset_struct  syscputestandreset_struct<a class="headerlink" href="#typedef-struct-tagsyscputestandreset-struct-syscputestandreset-struct" title="Permalink to this headline">¶</a></h3>
<p>Test and reset a bit in an ULONG variable in one processor step. This operation is to provide a multitasking save operation.</p>
<p><strong>Returns:</strong></p>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>RESULT: Returns the runtime system error code (see CmpErrors.library). <a href="#id5"><span class="problematic" id="id6">*</span></a>ERR_OK: If bit could be reset and was set before, <a href="#id7"><span class="problematic" id="id8">*</span></a>ERR_FAILED: If bit is still reset</p>
</div>
<div class="section" id="typedef-struct-tagsyscputestandset-struct-syscputestandset-struct">
<span id="group-sys-cpu-handling-itf-1ga9ce286678bdba5814a3661e511732d2b"></span><h3>typedef struct tagsyscputestandset_struct  syscputestandset_struct<a class="headerlink" href="#typedef-struct-tagsyscputestandset-struct-syscputestandset-struct" title="Permalink to this headline">¶</a></h3>
<p>Test and set a bit in an ULONG variable in one processor step. This operation is to provide a multitasking save operation.</p>
<p><strong>Returns:</strong></p>
<p><a href="#id9"><span class="problematic" id="id10">*</span></a>RESULT: Returns the runtime system error code (see CmpErrors.library). <a href="#id11"><span class="problematic" id="id12">*</span></a>ERR_OK: If bit could be set and was set before, <a href="#id13"><span class="problematic" id="id14">*</span></a>ERR_FAILED: If bit is still set</p>
</div>
<div class="section" id="typedef-struct-tagsyscputestandsetbit-struct-syscputestandsetbit-struct">
<span id="group-sys-cpu-handling-itf-1ga3d7349a82fde096015e748c153642176"></span><h3>typedef struct tagsyscputestandsetbit_struct  syscputestandsetbit_struct<a class="headerlink" href="#typedef-struct-tagsyscputestandsetbit-struct-syscputestandsetbit-struct" title="Permalink to this headline">¶</a></h3>
<p>&lt;SIL2&gt;</p>
<p>The function test and set or clear a bit in a variable in one processor step. This operation must be atomic to provide a multitasking save operation.</p>
<p>IMPLEMENTATION NOTE: Try to use a processor opcode, that provides this operation. If such an opcode is not available, use SysCpuTestAndSetBitBase in your platform adaptation.</p>
<p><strong>Returns:</strong></p>
<p><a href="#id15"><span class="problematic" id="id16">*</span></a>RESULT: Returns the runtime system error code (see CmpErrors.library).</p>
<ul class="simple">
<li>ERR_OK: bSet=1: If bit could be set and was not set before bSet=0: If bit could be cleared and was set before</li>
<li>ERR_FAILED: bSet=1: If bit is still set bSet=0: If bit is still cleared</li>
<li>ERR_PARAMETER: If pAddress=NULL or pAddress is unaligned or iBit is out nSize range</li>
<li>ERR_NOT_SUPPORTED: If function is not available because of missing components (e.g. SysInt for locking bit access)</li>
<li>ERR_NOTIMPLEMENTED: If function is not implemented on this platform</li>
</ul>
</div>
<div class="section" id="typedef-isyscpuhandling-c-isyscpuhandling">
<span id="group-sys-cpu-handling-itf-1ga117e46ae162923b95d2a653634b0a217"></span><h3>typedef ISysCpuHandling_C ISysCpuHandling<a class="headerlink" href="#typedef-isyscpuhandling-c-isyscpuhandling" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="function-documentation">
<h2>Function Documentation<a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="void-syscpuatomicadd-syscpuatomicadd-struct-p">
<span id="group-sys-cpu-handling-itf-1ga8c261020d58afb5468eb75cd51370829"></span><h3>void syscpuatomicadd (syscpuatomicadd_struct <a href="#id17"><span class="problematic" id="id18">*</span></a>p)<a class="headerlink" href="#void-syscpuatomicadd-syscpuatomicadd-struct-p" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="void-syscpucalliecfuncwithparams-syscpucalliecfuncwithparams-struct-p">
<span id="group-sys-cpu-handling-itf-1ga342ad004d7518950bad3f3b11a7b9bc0"></span><h3>void syscpucalliecfuncwithparams (syscpucalliecfuncwithparams_struct <a href="#id19"><span class="problematic" id="id20">*</span></a>p)<a class="headerlink" href="#void-syscpucalliecfuncwithparams-syscpucalliecfuncwithparams-struct-p" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="void-syscputestandreset-syscputestandreset-struct-p">
<span id="group-sys-cpu-handling-itf-1ga9e0dc508a43652ec1d666a63d4e0e92d"></span><h3>void syscputestandreset (syscputestandreset_struct <a href="#id21"><span class="problematic" id="id22">*</span></a>p)<a class="headerlink" href="#void-syscputestandreset-syscputestandreset-struct-p" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="void-syscputestandset-syscputestandset-struct-p">
<span id="group-sys-cpu-handling-itf-1ga6e1edd6a282e2dc1bbd01b01de3750cf"></span><h3>void syscputestandset (syscputestandset_struct <a href="#id23"><span class="problematic" id="id24">*</span></a>p)<a class="headerlink" href="#void-syscputestandset-syscputestandset-struct-p" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="void-syscputestandsetbit-syscputestandsetbit-struct-p">
<span id="group-sys-cpu-handling-itf-1gac254a4ee5e08aae17ac9e1ac68b1b22c"></span><h3>void syscputestandsetbit (syscputestandsetbit_struct <a href="#id25"><span class="problematic" id="id26">*</span></a>p)<a class="headerlink" href="#void-syscputestandsetbit-syscputestandsetbit-struct-p" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="rts-result-syscpuhandlingosinit-init-struct-pinit">
<span id="group-sys-cpu-handling-itf-1gadce9940c690ed21f47d007f9878c5519"></span><h3>RTS_RESULT SysCpuHandlingOSInit (INIT_STRUCT <a href="#id27"><span class="problematic" id="id28">*</span></a>pInit)<a class="headerlink" href="#rts-result-syscpuhandlingosinit-init-struct-pinit" title="Permalink to this headline">¶</a></h3>
<p>EXTERN LIB SECTION END</p>
</div>
<div class="section" id="rts-result-syscpuhandlingoshookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2">
<span id="group-sys-cpu-handling-itf-1ga215b7f5823e79aee802deef8bcfd39ca"></span><h3>RTS_RESULT SysCpuHandlingOSHookFunction (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)<a class="headerlink" href="#rts-result-syscpuhandlingoshookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="int-syscpuflushinstructioncache-void-pbaseaddress-unsigned-long-ulsize">
<span id="group-sys-cpu-handling-itf-1gad9c708fa59e4da7c362a2bd305dee8bc"></span><h3>int SysCpuFlushInstructionCache (void <a href="#id29"><span class="problematic" id="id30">*</span></a>pBaseAddress, unsigned long ulSize)<a class="headerlink" href="#int-syscpuflushinstructioncache-void-pbaseaddress-unsigned-long-ulsize" title="Permalink to this headline">¶</a></h3>
<p>On some processors/operating systems this function must be called after code has been changed, so that the CPU is notified about the change.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="12%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pBaseAddress</td>
<td>Start address of the region to be flushed. Set to NULL to flush the complete instruction cache.</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulSize</td>
<td>Length of the region to be flushed. This parameter is ignored if pBaseAddress is NULL.</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-syscpucalliecfuncwithparams-rts-void-fctptr-pfiecfunc-void-pparam-int-isize">
<span id="group-sys-cpu-handling-itf-1ga008f25292ebc98e6882d51ebd6303c14"></span><h3>RTS_RESULT SysCpuCallIecFuncWithParams (RTS_VOID_FCTPTR pfIECFunc, void <a href="#id31"><span class="problematic" id="id32">*</span></a>pParam, int iSize)<a class="headerlink" href="#rts-result-syscpucalliecfuncwithparams-rts-void-fctptr-pfiecfunc-void-pparam-int-isize" title="Permalink to this headline">¶</a></h3>
<p>Call an IEC function from plain C code. Since different CPU&#8217;s/systems use different calling conventions, this function should be used as a wrapper.</p>
<p>IEC functions or methods of function block use all the same calling convention: They have no return value and exactly one parameter, which is a pointer to a struct that contains all required IN and OUT parameters.</p>
<p>IMPLEMENTATION NOTE: The content of the parameter structure must be copied completely on the stack as an input parameter! Don&#8217;t copy only the pointer! Because of this, the size of the structure is provided as a separate parameter to this function. Additionally, the structure of the IEC function must be copied back into the give parameter to return result values of the IEC function! For all this operations you have to ensure the stack alignment, but avoid copying more bytes than iSize</p>
<p>IMPLEMENTATION NOTE: Unused parameter pParam can be NULL, if function has no argument and no result (e.g. CodeInit)!</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="8%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pfIECFunc</td>
<td>Pointer to the IEC function that should be called RANGE=[NULL,VALID_IEC_FUNC,INVALID_IEC_FUNC]</td>
</tr>
<tr class="row-even"><td>[inout]</td>
<td>pParam</td>
<td>Pointer to the parameter struct that contains the function parameters. ATTENTION: Can be NULL! RANGE=[NULL,VALID_PARAMETER]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>iSize</td>
<td>Size of the parameter structure to copy the content on stack. ATTENTION: Can be 0! RANGE=[0,VALID_SIZE]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Parameter check was successfull and pfIECFunc was called</td>
</tr>
<tr class="row-even"><td>ERR_PARAMETER</td>
<td>pfIECFunc is NULL or for a paramter size &gt; 0 pParam is NULL</td>
</tr>
<tr class="row-odd"><td>ERR_NOTIMPLEMENTED</td>
<td>Function is not implemented</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="void-syscpudebughandler-void">
<span id="group-sys-cpu-handling-itf-1gaf578b1b3a5575decb892beb9ce698a90"></span><h3>void syscpudebughandler (void)<a class="headerlink" href="#void-syscpudebughandler-void" title="Permalink to this headline">¶</a></h3>
<p>Routine is the entry of the IEC code debugger. Is called out of the IEC task if breakpoint is reached.</p>
<p>IMPLEMENTATION NOTE: In this routine, the <a class="reference internal" href="group___cmp_app_b_p_itf.html#group-cmp-app-b-p-itf-1ga6b17f465662ba51cf0832f8c2baf0dfd"><em>AppDebugHandler()</em></a> function of CmpApp must be called with the appropriate parameters. See <em class="xref std std-ref">CmpAppItf.h</em> for detailed information. The return value of <a class="reference internal" href="group___cmp_app_b_p_itf.html#group-cmp-app-b-p-itf-1ga6b17f465662ba51cf0832f8c2baf0dfd"><em>AppDebugHandler()</em></a> must be used to set the return address in the IEC code. To this address we will return when leaving <a class="reference internal" href="#group-sys-cpu-handling-itf-1gaf578b1b3a5575decb892beb9ce698a90"><em>syscpudebughandler()</em></a> .</p>
<p>SIL2 IMPLEMENTATION NOTE: This routine may never be reached within safety mode. If it is called in safety mode an Exception must be generated immediately! The Execution may not proceed to further debug mechanism!</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="13%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>OperationMode</td>
<td><strong>*PSEUDO*</strong> Specifies only that the function should be called RANGE=[RTS_SIL2_OPMODE_SAFE,RTS_SIL2_OPMODE_DEBUG]</td>
</tr>
<tr class="row-even"><td>[out]</td>
<td>bExceptionOccured</td>
<td><strong>*PSEUDO*</strong> Specifies, if an exception should occure, or not RANGE=[TRUE,FALSE]</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>no return value</p>
</div>
<div class="section" id="rts-result-syscpugetbreakpointcode-unsigned-char-pbyareastart-unsigned-char-pbybpaddress-unsigned-char-pbyopcode-int-piopcodesize">
<span id="group-sys-cpu-handling-itf-1gaebc0723f197000901171b7967ee8969e"></span><h3>RTS_RESULT SysCpuGetBreakpointCode (unsigned char <a href="#id33"><span class="problematic" id="id34">*</span></a>pbyAreaStart, unsigned char <a href="#id35"><span class="problematic" id="id36">*</span></a>pbyBPAddress, unsigned char <a href="#id37"><span class="problematic" id="id38">*</span></a>pbyOpCode, int <a href="#id39"><span class="problematic" id="id40">*</span></a>piOpcodeSize)<a class="headerlink" href="#rts-result-syscpugetbreakpointcode-unsigned-char-pbyareastart-unsigned-char-pbybpaddress-unsigned-char-pbyopcode-int-piopcodesize" title="Permalink to this headline">¶</a></h3>
<p>Routine retrieves the breakpoint opcode for IEC code debugging. This is cpu dependant and depends additionally on the CoDeSys codegenerator.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="9%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pbyAreaStart</td>
<td>Pointer to start of the area.</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pbyBPAddress</td>
<td>Pointer to breakpoint address (where the breakpoint will be set). This parameter is used for breakpoints that uses absolut jumps.</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>pbyOpCode</td>
<td>Pointer to get opcode</td>
</tr>
<tr class="row-even"><td>[inout]</td>
<td>piOpcodeSize</td>
<td>Pointer to maximum size of opcode buffer and return the real size of the opcode</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-syscpugetcallstackentry-rts-uintptr-pbp-void-ppaddress">
<span id="group-sys-cpu-handling-itf-1gacd19edb2dbc783f7deb654d33d60102a"></span><h3>RTS_RESULT SysCpuGetCallstackEntry (RTS_UINTPTR <a href="#id41"><span class="problematic" id="id42">*</span></a>pBP, void <a href="#id43"><span class="problematic" id="id44">**</span></a>ppAddress)<a class="headerlink" href="#rts-result-syscpugetcallstackentry-rts-uintptr-pbp-void-ppaddress" title="Permalink to this headline">¶</a></h3>
<p>Routine retrieves an IEC callstack entry, if the IEC code execution is stopped in the IEC code (breakpoint, exception, etc.). The callstack can be investigated out of the stack frames of each entered nested function. The first callstack entry is calculated outside this routine from the instruction pointer address (IP) that is provided for the <a class="reference internal" href="group___cmp_app_b_p_itf.html#group-cmp-app-b-p-itf-1ga6b17f465662ba51cf0832f8c2baf0dfd"><em>AppDebugHandler()</em></a> routine from <a class="reference internal" href="#group-sys-cpu-handling-itf-1gaf578b1b3a5575decb892beb9ce698a90"><em>syscpudebughandler()</em></a> . All further entries are called from this routine.</p>
<p>IMPLEMENTATION NOTE: The stack frame has typically the following structure:</p>
<div class="highlight-python"><div class="highlight"><pre>*                            .         STACK                        CODE
*                            .         -----                        ----
*                            .
*                            .         BP0 /--------|               Fct0:
*                            .                      |                    ...
*                            .         Return Fct0  |                    Call Fct1
*                            .    |--\ BP1 ---------|                    Return Fct0
*                            .    |
*                            .    |    Return Fct1                  Fct1:
*                            .    |--- BP2 /--------|                    ...
*                            .         ...          |                    Call Fct2
*                            .         Stop         |                    Return Fct1
*                            .                      |-- pulBP
*                            .                                      Fct2:
*                            .                                        ...
*                            .                           IP --------/    Stop
*
</pre></div>
</div>
<p>In this example, Fct0 calls Fct1 and Fct1 calls Fct2. This is a nested call with 3 Functions. Inside Fct2 we do a halt (e.g. stop on breakpoint). If we take a look on the stack, we see the return addresses from Fct0 and Fct1 on the stack. At the entry of each function, the base- (or frame-) pointer is pushed on the stack with the previous content. So you can see, the BP entries on the stack are organized as a chained list from stackframe to stack frame.</p>
<p>The first stack entry is the current position. This is calculated out of the IP address and cannot be investigated from stack.</p>
<p>The pulBP Parameter is a pointer, thats content is the address of the stack, where the BP entry resides.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="8%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[inout]</td>
<td>pBP</td>
<td>Pointer to last base pointer entry (or frame pointer) and returns the pointer to the next base pointer in the stack frame</td>
</tr>
<tr class="row-even"><td>[out]</td>
<td>ppAddress</td>
<td>Pointer pointer to return address in the code of the caller</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-syscpugetcallstackentry2-rts-i32-bieccode-rts-uintptr-pbp-void-ppaddress">
<span id="group-sys-cpu-handling-itf-1ga81a59c15038759a6a8b84f8fc1a776bf"></span><h3>RTS_RESULT SysCpuGetCallstackEntry2 (RTS_I32 bIecCode, RTS_UINTPTR <a href="#id45"><span class="problematic" id="id46">*</span></a>pBP, void <a href="#id47"><span class="problematic" id="id48">**</span></a>ppAddress)<a class="headerlink" href="#rts-result-syscpugetcallstackentry2-rts-i32-bieccode-rts-uintptr-pbp-void-ppaddress" title="Permalink to this headline">¶</a></h3>
<p>Routine to retrieve a callstack entry. The additional parameter bIecCode specifies, if the callstack should be retrieved in IEC-code (bIecCode = 1) or in C-code of the runtime system (bIecCode = 0). IMPLEMENTATION NOTE: The callstack in C-code is sometimes compiler dependant and must be implemented here specific to the compiler. If ERR_NOTIMPLEMENTED is returned, the generic linear backtrace on stack is done in SysCpuHandling.c.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="7%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>bIecCode</td>
<td>Is callstack expected in IEC- or in runtime-code: bIecCode=1: Expected in IEC-code bIecCode=0: Expected in runtime-code (external library call)</td>
</tr>
<tr class="row-even"><td>[inout]</td>
<td>pBP</td>
<td>Pointer to last base pointer entry (or frame pointer) and returns the pointer to the next base pointer in the stack frame</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>ppAddress</td>
<td>Pointer pointer to return address in the code of the caller</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_NOTIMPLEMENTED</td>
<td>If ERR_NOTIMPLEMENTED is returned, the generic linear backtrace on stack is done in SysCpuHandling.c</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rts-result-syscpugetcallstackentry3-rts-i32-bieccode-regcontext-pcontext-void-ppaddress">
<span id="group-sys-cpu-handling-itf-1gad47b07d01ccaab9a433ea87080d89ab1"></span><h3>RTS_RESULT SysCpuGetCallstackEntry3 (RTS_I32 bIecCode, RegContext <a href="#id49"><span class="problematic" id="id50">*</span></a>pContext, void <a href="#id51"><span class="problematic" id="id52">**</span></a>ppAddress)<a class="headerlink" href="#rts-result-syscpugetcallstackentry3-rts-i32-bieccode-regcontext-pcontext-void-ppaddress" title="Permalink to this headline">¶</a></h3>
<p>Routine to retrieve a callstack entry. The additional parameter bIecCode specifies, if the callstack should be retrieved in IEC-code (bIecCode = 1) or in C-code of the runtime system (bIecCode = 0). We use here first <em class="xref std std-ref">SysCpuGetCallstackEntry2()</em> of the platform adaptation. If it is not implemented, we do a generic backtrace on the stack.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="7%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>bIecCode</td>
<td>Is callstack expected in IEC- or in runtime-code: bIecCode=1: Expected in IEC-code bIecCode=0: Expected in runtime-code (external library call)</td>
</tr>
<tr class="row-even"><td>[inout]</td>
<td>pContext</td>
<td>Pointer to last base context entry and returns the pointer to the next context of the stack frame</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>ppAddress</td>
<td>Pointer pointer to return address in the code corresponding to the callstack entry</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Callstack entry resp. the IEC caller could be detected</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Something failed during detecting the callstack</td>
</tr>
<tr class="row-odd"><td>ERR_NOMEMORY</td>
<td>Callstack entry resp. the IEC caller could _not_ be detected. Perhaps there is no IEC caller or the necessary setting in the DeviceDescription is not set for the platform: ARM, CortexM3, MIPS, PPC, SH, x86-64 and x86/WindowsCE</td>
</tr>
</tbody>
</table>
<p>&lt;ts:section name=&#8221;codegenerator&#8221;&gt; &lt;ts:setting name=&#8221;compiler-defines&#8221; type=&#8221;string&#8221; access=&#8221;visible&#8221;&gt; &lt;ts:value&gt;generate_exceptioninfo&lt;/ts:value&gt; &lt;/ts:setting&gt; &lt;/ts:section&gt; corresponding</p>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_NOT_SUPPORTED</td>
<td>A necessary interface function is not available (CmpApp::AppGetApplicationByAreaAddress)</td>
</tr>
<tr class="row-even"><td>ERR_PARAMETER</td>
<td>If one of the parameters is invalid</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rts-uintptr-syscpusearchonstack-rts-uintptr-psp-rts-uintptr-pattern-rts-result-presult">
<span id="group-sys-cpu-handling-itf-1ga29efadcd4e9cb59135d39c400a764105"></span><h3>RTS_UINTPTR* <a href="#id75"><span class="problematic" id="id76">SysCpuSearchOnStack_</span></a> (RTS_UINTPTR <a href="#id53"><span class="problematic" id="id54">*</span></a>pSP, RTS_UINTPTR pattern, RTS_RESULT <a href="#id55"><span class="problematic" id="id56">*</span></a>pResult)<a class="headerlink" href="#rts-uintptr-syscpusearchonstack-rts-uintptr-psp-rts-uintptr-pattern-rts-result-presult" title="Permalink to this headline">¶</a></h3>
<p>Routine to find pattern on stack</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pSP</td>
<td>Pointer to stack to start search</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pattern</td>
<td>Pattern to search for on the stack</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>pResult</td>
<td>Pointer to error code</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Pointer to the stack, where the pattern was found or NULL if failed</p>
</div>
<div class="section" id="rts-result-syscpugetinstancepointer-rts-uintptr-pbp-void-ppinstancepointer">
<span id="group-sys-cpu-handling-itf-1ga2722c29654c8d24b447b45026f539318"></span><h3>RTS_RESULT SysCpuGetInstancePointer (RTS_UINTPTR <a href="#id57"><span class="problematic" id="id58">*</span></a>pBP, void <a href="#id59"><span class="problematic" id="id60">**</span></a>ppInstancePointer)<a class="headerlink" href="#rts-result-syscpugetinstancepointer-rts-uintptr-pbp-void-ppinstancepointer" title="Permalink to this headline">¶</a></h3>
<p>Routine to retrieve the instance pointer of an FB. Is used to get an instance specific callstack. The position of the instance pointer depends on the CoDeSys codegenerator and is cpu dependant.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="13%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[inout]</td>
<td>pBP</td>
<td>Pointer to last base pointer entry (or frame pointer) and returns the pointer to the next base pointer in the stack frame</td>
</tr>
<tr class="row-even"><td>[out]</td>
<td>ppInstancePointer</td>
<td>Pointer pointer to the instance pointer of an FB</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-syscpugetmonitoringbase-rts-uintptr-pbp">
<span id="group-sys-cpu-handling-itf-1ga404cef3173477767d7ca48ae0f1cd21b"></span><h3>RTS_RESULT SysCpuGetMonitoringBase (RTS_UINTPTR <a href="#id61"><span class="problematic" id="id62">*</span></a>pBP)<a class="headerlink" href="#rts-result-syscpugetmonitoringbase-rts-uintptr-pbp" title="Permalink to this headline">¶</a></h3>
<p>Routine to retrieve the frame pointer for monitoring data access.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="4%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[inout]</td>
<td>pBP</td>
<td>Pointer to last base pointer entry (or frame pointer) and returns the pointer on the stack for monitoring data access</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-syscputestandset-rts-ui32-pul-int-ibit">
<span id="group-sys-cpu-handling-itf-1gaad809fbddfc71b5cd8948e0df09dfc16"></span><h3>RTS_RESULT SysCpuTestAndSet (RTS_UI32 <a href="#id63"><span class="problematic" id="id64">*</span></a>pul, int iBit)<a class="headerlink" href="#rts-result-syscputestandset-rts-ui32-pul-int-ibit" title="Permalink to this headline">¶</a></h3>
<p>Obsolete: Use SysCpuTestAndSetBit instead!</p>
<p>OBSOLETE function to test and set a bit in an ULONG variable in one processor step. This operation must be atomic to provide a multitasking save operation.</p>
<p>IMPLEMENTATION NOTE: Try to use a processor opcode, that provides this operation. If such an opcode is not available, use SysCpuTestAndSetBase in your platform adaptation.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pul</td>
<td>Pointer to the unsigned value to test an set a bit inside in one atomic processor step</td>
</tr>
<tr class="row-even"><td>[out]</td>
<td>iBitOut</td>
<td><strong>*PSEUDO*</strong> Bit that was really set</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Error code:</p>
<ul class="simple">
<li>ERR_OK: If bit could be set and was not set before</li>
<li>ERR_FAILED: If bit is still set</li>
</ul>
</div>
<div class="section" id="rts-result-syscputestandreset-rts-ui32-pul-int-ibit">
<span id="group-sys-cpu-handling-itf-1ga5aa3e6598c2ed1d99444811172505991"></span><h3>RTS_RESULT SysCpuTestAndReset (RTS_UI32 <a href="#id65"><span class="problematic" id="id66">*</span></a>pul, int iBit)<a class="headerlink" href="#rts-result-syscputestandreset-rts-ui32-pul-int-ibit" title="Permalink to this headline">¶</a></h3>
<p>Obsolete: Use SysCpuTestAndSetBit instead!</p>
<p>OBSOLETE function to reset a bit in an ULONG variable in one processor step. This operation must be atomic to provide a multitasking save operation.</p>
<p>IMPLEMENTATION NOTE: Try to use a processor opcode, that provides this operation. If such an opcode is not available, use SysCpuTestAndResetBase in your platform adaptation.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pul</td>
<td>Pointer to the unsigned value to test an reset a bit inside in one atomic processor step</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>iBit</td>
<td>Bit number inside the variable to test and reset. 0=first bit, 31=last bit</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li>ERR_OK: If bit could be reset</li>
<li>ERR_FAILED: If bit reset failed</li>
</ul>
</div>
<div class="section" id="rts-result-syscputestandsetbit-void-paddress-int-nlen-int-ibit-int-bset">
<span id="group-sys-cpu-handling-itf-1ga6f2a3920d62c0af0c60ba69fec79fff4"></span><h3>RTS_RESULT SysCpuTestAndSetBit (void <a href="#id67"><span class="problematic" id="id68">*</span></a>pAddress, int nLen, int iBit, int bSet)<a class="headerlink" href="#rts-result-syscputestandsetbit-void-paddress-int-nlen-int-ibit-int-bset" title="Permalink to this headline">¶</a></h3>
<p>The function test and set or clear a bit in a variable in one processor step. This operation must be atomic to provide a multitasking save operation.</p>
<p>IMPLEMENTATION NOTE: Try to use a processor opcode, that provides this operation. If such an opcode is not available, use SysCpuTestAndSetBitBase in your platform adaptation. The function returns ERR_FAILED if the bit was already set or reset.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="4%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pAddress</td>
<td>Pointer to test and set or clear a bit inside in one atomic processor step. NOTE: The pointer must be natural aligned! nLen=2: pAddress must be 2Byte aligned; nLen=4: pAddress must be 4Byte aligned RANGE=[NULL,ADDR_ALIGN0,ADDR_ALIGN1,ADDR_ALIGN2,ADDR_ALIGN3]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>nLen</td>
<td>Size of the value behind the address. Can only be 1 (unsigned char), 2 (unsigned short) or 4 (unsigned long) RANGE=[1,2,4,INVALID_LEN]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>iBit</td>
<td><p class="first">Bit number inside the variable to test and set or clear:</p>
<ul class="last simple">
<li>nLen = 1: iBit 0..7</li>
<li>nLen = 2: iBit 0..15</li>
<li>nLen = 4: iBit 0..31 RANGE=[INT_MIN..0,0..7,8..15,16..31,32..INT_MAX]</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>bSet</td>
<td>1=Set bit, 0=Clear bit RANGE=[0,1]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>iBit</td>
<td>Bit number inside the variable to test and set. 0=first bit, 31=last bit</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Bit could be set/reset successfully</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Bit could not be set/reset successfully, perhaps it already was set/reset</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>pAddress may not be null or misaligned, nLen may only be 1,2,4, iBit must be in correct range</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Error code: returns if Bit could be set/reset successfully, or if any problem occured</p>
</div>
<div class="section" id="rts-result-syscpugetcontext-regcontext-pcontext">
<span id="group-sys-cpu-handling-itf-1ga84f32e87a6568e4aab2cb573aebbf0be"></span><h3>RTS_RESULT SysCpuGetContext (RegContext <a href="#id69"><span class="problematic" id="id70">*</span></a>pContext)<a class="headerlink" href="#rts-result-syscpugetcontext-regcontext-pcontext" title="Permalink to this headline">¶</a></h3>
<p>Get the actual register context.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[out]</td>
<td>pContext</td>
<td>Actual register context</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-i32-syscpuatomicadd-rts-i32-pivalue-rts-i32-nsum-rts-result-presult">
<span id="group-sys-cpu-handling-itf-1gaa546c6642b797434c619a165d0cd3714"></span><h3>RTS_I32 SysCpuAtomicAdd (RTS_I32 <a href="#id71"><span class="problematic" id="id72">*</span></a>piValue, RTS_I32 nSum, RTS_RESULT <a href="#id73"><span class="problematic" id="id74">*</span></a>pResult)<a class="headerlink" href="#rts-i32-syscpuatomicadd-rts-i32-pivalue-rts-i32-nsum-rts-result-presult" title="Permalink to this headline">¶</a></h3>
<p>Function to increment the content of the given pointer by nSum in one atomic operation (task safe).</p>
<p>IMPLEMENTATION NOTE: Add or substract the value to/from the content of the pointer, and return the value after this operation atomically.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[inout]</td>
<td>piValue</td>
<td>Pointer to the value to increment RANGE=[NULL,VALID_ATOMICADD_ADDR]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>nSum</td>
<td>Summand for the operation. greater 0 to increment, lower 0 to decrement RANGE=[RTS_RANGE_OF_RTS_I32]</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>pResult</td>
<td>Pointer to error code</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Returns the value after the increment operation in an atomic way!</p>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Call was sucessfull</td>
</tr>
<tr class="row-even"><td>ERR_PARAMETER</td>
<td>piValue was NULL</td>
</tr>
<tr class="row-odd"><td>ERR_NOTIMPLEMENTED</td>
<td>Function is not supported</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="group___sys_cpu_multi_core_itf.html" title="SysCpuMultiCoreItf"
             >next</a> |</li>
        <li class="right" >
          <a href="group___sys_com_itf.html" title="SysComItf"
             >previous</a> |</li>
        <li><a href="../index.html">RuntimeSystemOnlineHelp V3.5.10.0</a> &raquo;</li>
          <li><a href="index.html" >Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, 3S-Smart Software Solutions GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>